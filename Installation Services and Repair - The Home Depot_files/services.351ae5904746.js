(function(){(function(){HD.CONTAINER_TYPES={HERO_CONTAINER:"hero_container",FORM_CONTAINER:"form_container"};var a=Backbone.View.extend({MAIN_ERROR_CONTAINER_CLASS:"main-error-container",SERVER_ERROR_MSG:"There was an error with your request. Please try again shortly.",HERO_CONTAINER:HD.CONTAINER_TYPES.HERO_CONTAINER,FORM_CONTAINER:HD.CONTAINER_TYPES.FORM_CONTAINER,containerType:HD.CONTAINER_TYPES.HERO_CONTAINER,getSubmissionCode:function(){return this.submitAsCode||this.code},initialize:function(b){this.data=b.data;this.page=b.page;this._initialize(b);this.getFocus()},uninitialize:function(){this._uninitialize();this.remove();this.looseFocus()},getFocus:function(){},looseFocus:function(){},setMainError:function(b){this.$("."+this.MAIN_ERROR_CONTAINER_CLASS).html(b).removeClass("hide")},unsetMainError:function(){this.$("."+this.MAIN_ERROR_CONTAINER_CLASS).addClass("hide").html("")},_handleServerErrors:function(c){var b;if(c.__all__){b=c.__all__[0]}else{b=_.first(_.values(c))||this.SERVER_ERROR_MSG}this.setMainError(b)},_handleUnexpectedResponse:function(){this.setMainError(this.SERVER_ERROR_MSG)},handleServerErrors:function(b){this._handleServerErrors(b)},handleUnexpectedResponse:function(){this._handleUnexpectedResponse()},_initialize:function(){},_uninitialize:function(){}});HD.BaseView=a})();(function(){var a=HD.EVENTS.SERVICES;var b="servicesuggestions";var c=HD.BaseView.extend({code:b,SUCCESS_TEMPLATE_QUERY:"#tmpl-success",SUGGESTION_EMPTY_ERROR:"Please enter a service or select it from the available drop down.",servicesArray:[],suggestionResults:[],categoriesSearched:0,selectedService:{_service:"",setService:function(d){d.preventDefault();this._service=d.target.value},getService:function(){return this._service}},events:{"click #service-search-submit":function(d){d.preventDefault();this.gotoService(this.selectedService.getService())},"keyup .service-search-input":function(d){this.selectedService.setService(d);if(d.keyCode===13){d.preventDefault();this.gotoService(this.selectedService.getService())}},"typeahead:render .service-search-input":function(){var g=[].slice.call(arguments,1);this.categoriesSearched+=1;if(g.length){this.suggestionResults.push(g)}if(this.categoriesSearched===HD.page.services.length){var f=[].concat.apply([],this.suggestionResults),e=[],d=[];f.map(function(h){e.push(h.code);d.push(h.name)});HD.tracking.track(a.HOME_SEARCH,{query:this.selectedService.getService(),suggestions:d,categories:e});this.suggestionResults=[];this.categoriesSearched=0}},"typeahead:selected .service-search-input":function(d){d.preventDefault();this.selectedService.setService(d);this.gotoService(this.selectedService.getService())},"focusin .service-search-input":function(){this.$(".twitter-typeahead").addClass("opened")},"focusout .service-search-input":function(){this.$(".twitter-typeahead").removeClass("opened")},"change .service-categories-list":function(){this.$(".service-search-input").typeahead("destroy");var d=this.$(".service-categories-list").val();HD.createServiceObjects(d);this.initializeSuggestion();this.$(".hybrid-input-text").focus();var e=this.$(".service-categories-list").val();HD.tracking.track(a.HOME_CATEGORY_FILTER,{category:e})}},gotoService:function(d){this.laddaSubmit.ladda("start");if(d){var g=this.collection.findWhere({name:d});if(g){var f=this.$el.attr("id");HD.trackingManager.trackGetItDone(f);var e=g.get("url");_.delay(function(h){window.location.assign(h)},1000,e);return}}if(this.$("."+this.MAIN_ERROR_CONTAINER_CLASS).length){this.setMainError(this.SUGGESTION_EMPTY_ERROR)}this.laddaSubmit.ladda("stop")},initializeSuggestion:function(){this.$(".service-search-input").typeahead({hint:false,highlight:true,autoselect:true,minLength:0},HD.serviceObjects);this.laddaSubmit=this.$("#service-search-submit").ladda()},_initialize:function(){this.collection=this.normalizeData(HD.page.services)},normalizeData:function(e){var d=new HD.ServiceCollection();_.each(e,function(f){_.each(f.services,function(g){g.groupSynonyms=f.synonyms;g.groupName=f.name;g.fixedSynonyms=g.synonyms.split(",").join(" ");d.add(g)})});return d}});HD.ServiceSuggestionsView=c})();(function(){var a=HD.EVENTS.SERVICES;var b="category_page";var c=HD.BaseView.extend({code:b,events:{"click .tile-link, .category-link":function(i){i.preventDefault();var f=i.target.text,g=i.target.href,h=i.target.getAttribute("data-category-code"),d=i.target.className;this.gotoService({service:f,url:g,linkType:d,category:h})},"click .tiles .tiles-hidden .tile-btn":function(h){var d=this.$(h.currentTarget).data("category-code"),f=this.$(".tiles-hidden"),e=this.$(".tiles-visible"),g=f.find(".tile-"+d);f.animate({opacity:0},400,"linear",function(){f.css("display","none");e.css("display","block");e.animate({opacity:1},400,"linear");g.css("display","none")})},"click .categories-mobile .category-list-item":function(d){var e=this.$(".category-list-item");if(d.currentTarget.classList.contains("category-list-item-selected")){d.currentTarget.classList.remove("category-list-item-selected")}else{e.removeClass("category-list-item-selected");d.currentTarget.classList.add("category-list-item-selected")}}},gotoService:function(e){HD.tracking.track(a.HOME_CATEGORY_CLICK,e);var d=e.url;_.delay(function(f){window.location.assign(f)},300,d)}});HD.CategoryView=c})();(function(){var a={initialize:function(e){this.page=e;var b=new HD.ServiceSuggestionsView({el:".services-search",model:undefined,page:this,data:{}});b.initializeSuggestion(b.programsMap);this.view=b;var d=new HD.ServiceSuggestionsView({el:".heading-content-mobile",model:undefined,page:this,data:{}});d.initializeSuggestion(d.programsMap);this.mobileSearch=d;var f=new HD.ServiceSuggestionsView({el:"#affixed-header",model:undefined,page:this,data:{}});f.initializeSuggestion(f.programsMap);this.affixedHeaderSearch=f;var c=new HD.CategoryView({el:".categories-services"});this.categoryView=c}};HD.servicePage=a})()}).call(this);